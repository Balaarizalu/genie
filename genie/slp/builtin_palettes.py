def build_palette(filename):
    """
        legacy function to build a palette object from an image like
        this one: http://alexander-jenkins.co.uk/blog/?p=9
    """
    from PIL import Image
    img = Image.open(filename)
    x_offset, y_offset = 6, 6
    tile_width, tile_height = 28, 22

    palette = {}
    for tile_y in xrange(16):
        for tile_x in xrange(16):
            x, y = tile_x * tile_width + x_offset, tile_y * tile_height + y_offset
            palette[tile_y * 16 + tile_x] = img.getpixel((x, y))

    return palette

# but in most cases, this should be enough
AOE1_PALETTE = {0: (0, 0, 0),
 1: (128, 0, 0),
 2: (0, 128, 0),
 3: (128, 128, 0),
 4: (0, 0, 128),
 5: (128, 0, 128),
 6: (0, 128, 128),
 7: (192, 192, 192),
 8: (192, 220, 192),
 9: (166, 202, 240),
 10: (163, 0, 255),
 11: (195, 0, 255),
 12: (227, 0, 255),
 13: (255, 0, 243),
 14: (255, 0, 210),
 15: (255, 0, 178),
 16: (227, 247, 255),
 17: (187, 215, 235),
 18: (147, 187, 215),
 19: (115, 155, 199),
 20: (87, 123, 179),
 21: (63, 95, 159),
 22: (39, 63, 143),
 23: (23, 39, 123),
 24: (7, 15, 103),
 25: (0, 0, 87),
 26: (255, 255, 243),
 27: (255, 255, 119),
 28: (255, 255, 79),
 29: (255, 255, 39),
 30: (254, 254, 0),
 31: (199, 199, 0),
 32: (255, 239, 239),
 33: (255, 191, 191),
 34: (255, 143, 143),
 35: (255, 95, 95),
 36: (255, 47, 47),
 37: (227, 11, 0),
 38: (199, 23, 0),
 39: (143, 31, 0),
 40: (111, 11, 7),
 41: (83, 11, 0),
 42: (171, 171, 0),
 43: (147, 147, 0),
 44: (119, 119, 0),
 45: (91, 91, 0),
 46: (63, 63, 0),
 47: (35, 35, 0),
 48: (255, 255, 199),
 49: (255, 255, 159),
 50: (255, 255, 0),
 51: (227, 227, 0),
 52: (223, 207, 15),
 53: (195, 163, 27),
 54: (163, 115, 23),
 55: (135, 103, 39),
 56: (107, 75, 39),
 57: (79, 55, 35),
 58: (11, 11, 0),
 59: (243, 255, 243),
 60: (211, 255, 191),
 61: (207, 255, 143),
 62: (155, 255, 95),
 63: (87, 255, 47),
 64: (243, 219, 187),
 65: (231, 195, 115),
 66: (207, 163, 67),
 67: (183, 139, 43),
 68: (163, 115, 79),
 69: (139, 91, 55),
 70: (115, 71, 39),
 71: (95, 51, 27),
 72: (63, 55, 35),
 73: (35, 35, 31),
 74: (0, 255, 0),
 75: (0, 231, 23),
 76: (0, 211, 39),
 77: (0, 187, 55),
 78: (0, 167, 67),
 79: (0, 143, 71),
 80: (255, 219, 179),
 81: (255, 195, 111),
 82: (251, 159, 31),
 83: (247, 139, 23),
 84: (243, 119, 15),
 85: (239, 99, 7),
 86: (207, 67, 0),
 87: (159, 51, 0),
 88: (135, 43, 0),
 89: (111, 35, 0),
 90: (0, 123, 75),
 91: (0, 103, 99),
 92: (0, 55, 83),
 93: (0, 19, 63),
 94: (0, 0, 43),
 95: (255, 247, 235),
 96: (175, 207, 147),
 97: (155, 183, 111),
 98: (139, 159, 79),
 99: (127, 139, 55),
 100: (99, 123, 47),
 101: (75, 107, 43),
 102: (55, 95, 39),
 103: (27, 67, 27),
 104: (19, 51, 19),
 105: (11, 27, 11),
 106: (247, 235, 215),
 107: (239, 219, 195),
 108: (231, 207, 175),
 109: (223, 195, 159),
 110: (215, 183, 143),
 111: (211, 171, 127),
 112: (254, 254, 254),
 113: (235, 235, 235),
 114: (219, 219, 219),
 115: (199, 199, 199),
 116: (179, 179, 179),
 117: (143, 143, 143),
 118: (107, 107, 107),
 119: (71, 71, 71),
 120: (55, 55, 55),
 121: (35, 35, 35),
 122: (187, 143, 99),
 123: (78, 55, 35),
 124: (47, 47, 35),
 125: (255, 251, 247),
 126: (235, 227, 219),
 127: (219, 207, 195),
 128: (235, 255, 239),
 129: (159, 231, 187),
 130: (95, 211, 159),
 131: (43, 191, 147),
 132: (0, 171, 147),
 133: (0, 131, 123),
 134: (0, 111, 107),
 135: (0, 79, 79),
 136: (0, 63, 67),
 137: (0, 35, 39),
 138: (199, 183, 175),
 139: (183, 163, 151),
 140: (163, 143, 131),
 141: (147, 123, 111),
 142: (127, 103, 95),
 143: (111, 87, 79),
 144: (107, 79, 71),
 145: (103, 75, 63),
 146: (99, 71, 59),
 147: (95, 67, 55),
 148: (91, 63, 47),
 149: (87, 59, 43),
 150: (83, 59, 39),
 151: (255, 1, 1),
 152: (171, 31, 0),
 153: (115, 35, 0),
 154: (99, 23, 0),
 155: (67, 7, 0),
 156: (51, 0, 0),
 157: (35, 0, 0),
 158: (243, 243, 255),
 159: (219, 219, 243),
 160: (199, 199, 231),
 161: (179, 183, 223),
 162: (159, 167, 211),
 163: (143, 151, 203),
 164: (127, 131, 183),
 165: (115, 119, 167),
 166: (99, 103, 151),
 167: (87, 87, 135),
 168: (75, 75, 119),
 169: (51, 51, 99),
 170: (31, 31, 83),
 171: (15, 15, 63),
 172: (7, 7, 47),
 173: (0, 0, 31),
 174: (255, 235, 215),
 175: (255, 203, 143),
 176: (255, 183, 75),
 177: (255, 179, 43),
 178: (235, 79, 0),
 179: (183, 59, 0),
 180: (203, 231, 187),
 181: (39, 79, 31),
 182: (15, 39, 15),
 183: (163, 163, 163),
 184: (127, 127, 127),
 185: (91, 91, 91),
 186: (15, 15, 15),
 187: (1, 1, 1),
 188: (255, 239, 219),
 189: (247, 223, 199),
 190: (239, 207, 179),
 191: (231, 187, 163),
 192: (223, 171, 147),
 193: (215, 151, 131),
 194: (207, 135, 115),
 195: (199, 115, 99),
 196: (191, 99, 87),
 197: (171, 71, 63),
 198: (151, 47, 39),
 199: (131, 27, 23),
 200: (95, 0, 0),
 201: (251, 247, 243),
 202: (247, 231, 215),
 203: (239, 207, 163),
 204: (235, 199, 139),
 205: (231, 191, 95),
 206: (139, 95, 11),
 207: (119, 75, 0),
 208: (255, 0, 247),
 209: (255, 0, 227),
 210: (255, 0, 211),
 211: (255, 0, 195),
 212: (255, 0, 179),
 213: (255, 0, 163),
 214: (255, 0, 147),
 215: (255, 0, 131),
 216: (255, 0, 115),
 217: (255, 0, 95),
 218: (255, 0, 79),
 219: (255, 0, 63),
 220: (255, 0, 47),
 221: (255, 0, 31),
 222: (255, 0, 15),
 223: (255, 0, 0),
 224: (251, 251, 251),
 225: (247, 243, 235),
 226: (247, 239, 227),
 227: (243, 235, 215),
 228: (243, 231, 207),
 229: (243, 227, 195),
 230: (243, 219, 183),
 231: (247, 215, 175),
 232: (247, 207, 163),
 233: (251, 199, 151),
 234: (255, 191, 143),
 235: (227, 171, 127),
 236: (203, 151, 111),
 237: (175, 131, 95),
 238: (151, 111, 79),
 239: (127, 95, 67),
 240: (167, 131, 35),
 241: (0, 151, 135),
 242: (0, 95, 95),
 243: (0, 47, 51),
 244: (2, 2, 2),
 245: (253, 253, 253),
 246: (255, 251, 240),
 247: (160, 160, 164),
 248: (39, 63, 144),
 249: (63, 95, 159),
 250: (87, 123, 180),
 251: (63, 95, 160),
 252: (39, 63, 145),
 253: (23, 39, 123),
 254: (23, 39, 124),
 255: (255, 255, 255)}

AOE2_PALETTE = {0: (0, 0, 0),
 1: (0, 74, 161),
 2: (0, 97, 155),
 3: (0, 74, 187),
 4: (0, 84, 176),
 5: (0, 90, 184),
 6: (0, 110, 176),
 7: (0, 110, 187),
 8: (0, 84, 197),
 9: (0, 98, 210),
 10: (0, 0, 0),
 11: (47, 47, 47),
 12: (67, 67, 67),
 13: (87, 87, 87),
 14: (37, 16, 6),
 15: (47, 26, 17),
 16: (0, 0, 82),
 17: (0, 21, 130),
 18: (19, 49, 161),
 19: (48, 93, 182),
 20: (74, 121, 208),
 21: (110, 166, 235),
 22: (151, 206, 255),
 23: (205, 250, 255),
 24: (64, 43, 23),
 25: (67, 51, 27),
 26: (70, 32, 6),
 27: (75, 57, 42),
 28: (84, 64, 43),
 29: (87, 69, 37),
 30: (87, 57, 27),
 31: (94, 74, 48),
 32: (65, 0, 0),
 33: (105, 11, 0),
 34: (160, 21, 0),
 35: (230, 11, 0),
 36: (255, 0, 0),
 37: (255, 100, 100),
 38: (255, 160, 160),
 39: (255, 220, 220),
 40: (97, 77, 67),
 41: (103, 58, 21),
 42: (113, 75, 51),
 43: (113, 75, 13),
 44: (115, 105, 84),
 45: (125, 97, 72),
 46: (125, 74, 0),
 47: (129, 116, 95),
 48: (0, 0, 0),
 49: (0, 7, 0),
 50: (0, 32, 0),
 51: (0, 59, 0),
 52: (0, 87, 0),
 53: (0, 114, 0),
 54: (0, 141, 0),
 55: (0, 169, 0),
 56: (134, 126, 118),
 57: (135, 64, 0),
 58: (136, 108, 79),
 59: (144, 100, 12),
 60: (146, 125, 105),
 61: (153, 106, 55),
 62: (159, 121, 88),
 63: (166, 74, 0),
 64: (80, 51, 26),
 65: (140, 78, 9),
 66: (191, 123, 0),
 67: (255, 199, 0),
 68: (255, 247, 37),
 69: (255, 255, 97),
 70: (255, 255, 166),
 71: (255, 255, 227),
 72: (167, 135, 102),
 73: (172, 144, 115),
 74: (175, 126, 36),
 75: (175, 151, 128),
 76: (185, 151, 146),
 77: (186, 166, 135),
 78: (187, 84, 0),
 79: (187, 156, 125),
 80: (110, 23, 0),
 81: (150, 36, 0),
 82: (210, 55, 0),
 83: (255, 80, 0),
 84: (255, 130, 1),
 85: (255, 180, 21),
 86: (255, 210, 75),
 87: (255, 235, 160),
 88: (189, 150, 111),
 89: (191, 169, 115),
 90: (195, 174, 156),
 91: (196, 170, 146),
 92: (196, 128, 88),
 93: (196, 166, 135),
 94: (197, 187, 176),
 95: (204, 160, 36),
 96: (0, 16, 16),
 97: (0, 37, 41),
 98: (0, 80, 80),
 99: (0, 120, 115),
 100: (0, 172, 150),
 101: (38, 223, 170),
 102: (109, 252, 191),
 103: (186, 255, 222),
 104: (206, 169, 133),
 105: (207, 105, 12),
 106: (207, 176, 156),
 107: (208, 155, 67),
 108: (215, 186, 155),
 109: (216, 162, 121),
 110: (217, 114, 24),
 111: (217, 187, 166),
 112: (47, 0, 46),
 113: (79, 0, 75),
 114: (133, 12, 121),
 115: (170, 47, 155),
 116: (211, 58, 201),
 117: (241, 108, 232),
 118: (255, 169, 255),
 119: (255, 210, 255),
 120: (218, 156, 105),
 121: (222, 177, 136),
 122: (225, 177, 90),
 123: (226, 195, 170),
 124: (232, 180, 120),
 125: (235, 202, 181),
 126: (235, 216, 190),
 127: (237, 199, 165),
 128: (28, 28, 28),
 129: (67, 67, 67),
 130: (106, 106, 106),
 131: (145, 145, 145),
 132: (185, 185, 185),
 133: (223, 223, 223),
 134: (255, 255, 255),
 135: (255, 255, 255),
 136: (247, 211, 191),
 137: (248, 201, 138),
 138: (255, 206, 157),
 139: (255, 225, 201),
 140: (255, 238, 217),
 141: (255, 226, 161),
 142: (255, 243, 220),
 143: (255, 255, 243),
 144: (21, 21, 0),
 145: (37, 37, 17),
 146: (27, 47, 0),
 147: (47, 57, 17),
 148: (67, 77, 7),
 149: (77, 77, 47),
 150: (44, 77, 3),
 151: (94, 84, 53),
 152: (95, 97, 39),
 153: (97, 97, 67),
 154: (67, 97, 29),
 155: (106, 115, 57),
 156: (116, 115, 75),
 157: (87, 116, 7),
 158: (118, 130, 65),
 159: (130, 136, 77),
 160: (138, 139, 87),
 161: (148, 155, 100),
 162: (156, 156, 139),
 163: (128, 157, 84),
 164: (149, 166, 97),
 165: (175, 165, 106),
 166: (176, 176, 159),
 167: (146, 176, 67),
 168: (194, 190, 148),
 169: (165, 196, 108),
 170: (166, 196, 77),
 171: (206, 187, 128),
 172: (206, 204, 155),
 173: (204, 217, 77),
 174: (221, 218, 166),
 175: (196, 226, 116),
 176: (247, 204, 17),
 177: (3, 28, 0),
 178: (7, 38, 0),
 179: (7, 47, 7),
 180: (19, 48, 0),
 181: (27, 57, 17),
 182: (47, 57, 47),
 183: (28, 62, 0),
 184: (14, 68, 14),
 185: (41, 69, 28),
 186: (33, 73, 18),
 187: (47, 87, 47),
 188: (77, 97, 57),
 189: (67, 97, 67),
 190: (87, 116, 77),
 191: (70, 119, 48),
 192: (85, 119, 52),
 193: (106, 136, 97),
 194: (196, 236, 166),
 195: (23, 53, 33),
 196: (43, 84, 64),
 197: (37, 116, 57),
 198: (23, 43, 53),
 199: (2, 33, 53),
 200: (2, 23, 53),
 201: (33, 64, 64),
 202: (0, 34, 97),
 203: (0, 51, 115),
 204: (43, 64, 74),
 205: (0, 43, 74),
 206: (4, 6, 9),
 207: (0, 123, 189),
 208: (64, 84, 84),
 209: (0, 115, 207),
 210: (23, 23, 74),
 211: (12, 23, 64),
 212: (0, 0, 2),
 213: (0, 64, 125),
 214: (2, 23, 84),
 215: (0, 138, 186),
 216: (64, 105, 105),
 217: (0, 146, 197),
 218: (94, 105, 105),
 219: (0, 74, 125),
 220: (0, 125, 207),
 221: (0, 120, 227),
 222: (84, 115, 125),
 223: (64, 105, 125),
 224: (0, 64, 146),
 225: (0, 53, 135),
 226: (115, 156, 156),
 227: (84, 146, 176),
 228: (146, 176, 187),
 229: (207, 248, 255),
 230: (105, 166, 197),
 231: (125, 197, 217),
 232: (156, 197, 217),
 233: (109, 126, 33),
 234: (113, 153, 36),
 235: (21, 118, 21),
 236: (51, 151, 39),
 237: (70, 181, 59),
 238: (89, 223, 89),
 239: (131, 245, 120),
 240: (174, 255, 174),
 241: (0, 255, 0),
 242: (0, 0, 255),
 243: (255, 255, 0),
 244: (255, 213, 0),
 245: (226, 154, 73),
 246: (241, 164, 82),
 247: (255, 171, 88),
 248: (255, 197, 113),
 249: (85, 125, 57),
 250: (129, 151, 49),
 251: (0, 255, 255),
 252: (255, 0, 255),
 253: (0, 139, 210),
 254: (0, 160, 243),
 255: (255, 255, 255)}
